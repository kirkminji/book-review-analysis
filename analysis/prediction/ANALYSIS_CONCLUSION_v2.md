# 뉴스 바이럴 지수 기반 베스트셀러 예측 분석 결론 (v2)

## 분석 개요

**목표**: 뉴스 바이럴 지수를 활용하여 경제/경영 도서 베스트셀러 판매를 예측할 수 있는가?

**데이터**:
- 기간: 2025년 1월 ~ 12월 (51주)
- 도서: 141권 (베스트셀러 차트인 경험 있는 도서)
- 카테고리: 10개 (거시경제, 주식투자, 부동산 등)
- 뉴스: 카테고리별 주간 바이럴 지수

---

## 분석 파일 목록

| 파일 | 설명 |
|------|------|
| `prophet_walkforward_decay.ipynb` | Prophet 시계열 예측 (카테고리 단위) |
| `ml_lag_feature_test_robust.ipynb` | ML 분석 메인 (SHAP, Time-split, 3가지 방법론 비교) |
| `rank_surge_analysis.ipynb` | 순위 급등/급락 케이스 분석 |
| `ml_image/` | ML 분석 시각화 이미지 (10개) |

---

## 핵심 발견

### 1. Lag Feature (전주 판매점수)의 압도적 예측력

| 지표 | 기존 피처만 | y_lag1 추가 | 개선율 |
|------|------------|-------------|--------|
| 상관계수 (r) | 0.094 | **0.885** | 9배↑ |
| 회귀 R² (평균) | 0.15 | **0.67** | +347% |
| 분류 F1 (평균) | 0.38 | **0.86** | +126% |

**결론: "과거 성과가 미래 성과를 결정한다" - 베스트셀러의 강한 관성 효과**

---

### 2. SHAP 분석 결과

| 순위 | 피처 | 중요도 비율 |
|------|------|------------|
| 1 | **y_lag1 (전주 판매점수)** | **90% 이상** |
| 2~10 | 카테고리, 바이럴 지수 | 미미 |

**결론**: 모델이 사실상 "전주 순위 기반 예측기"로 작동

---

### 3. 방법론 비교 (3가지)

| 방법론 | y_lag1만 R² | 특징 |
|--------|------------|------|
| StandardScaler + Random | 0.70 | Data Leakage 가능성 |
| RobustScaler + Random | 0.70 | 이상치 강건성 |
| **RobustScaler + Time-based** | **0.89** | 실서비스 환경 시뮬레이션 |

**결론**: Time-based Split에서 오히려 성능 향상 → lag 피처의 예측력이 매우 강력

---

### 4. 순위 급등/급락 분석 (Lag 효과)

| 시점 | 급등 평균 바이럴 | 일반 평균 바이럴 | 해석 |
|------|-----------------|-----------------|------|
| 동시점 | -0.8 | 13.1 | **역관계** |
| **1주 전 (Lag1)** | **35.7** | **10.0** | **순관계** |
| 2주 전 (Lag2) | 30.6 | 13.4 | 순관계 |

**핵심 발견**:
- 동시점 바이럴 지수는 순위 급등과 역관계
- **1-2주 전 바이럴 지수가 높으면 이번 주 순위 급등 확률 증가**
- 바이럴 → 구매까지 1-2주의 시차 존재

---

### 5. Prophet 시계열 예측 (카테고리 단위)

| 지표 | 값 | 해석 |
|------|-----|------|
| 상관계수 (r) | 0.855 | 높음 |
| R² | 0.732 | 73% 설명력 |
| MAE | 8.17 | 평균 8점 오차 |
| **방향성 정확도** | **50.4%** | **랜덤 수준** |

**해석**:
- 카테고리별 **평균 판매 수준**은 예측 가능 (r=0.86)
- **다음 주 상승/하락**은 예측 불가 (방향성 50%)
- Prophet이 baseline은 잡지만, 주간 변동은 포착 못함

---

### 6. 뉴스 바이럴 → 도서 판매 인과관계

| 분석 방법 | 결과 | 해석 |
|-----------|------|------|
| 동시점 상관분석 | r < 0.1 | **거의 무상관** |
| Lag 적용 상관분석 | 급등 케이스에서 유의미 | **시차 효과 존재** |
| Prophet 방향성 | 50.4% | **랜덤 수준** |

**결론: 동시점에서는 인과관계 약함, 1-2주 시차 적용 시 관계 발견**

---

## 최종 결론

### 연구 질문에 대한 답변

**Q: 뉴스 바이럴 지수로 베스트셀러를 예측할 수 있는가?**

**A: 제한적으로 가능, 단 시차 효과와 lag 피처 활용 필수**

1. **책 수준 예측**: y_lag1(전주 판매점수) 사용 시 R² = 0.89 달성
2. **급등 예측**: 1-2주 전 바이럴 지수로 급등 확률 추정 가능
3. **카테고리 수준**: Prophet으로 대략적인 판매 규모는 예측 가능

### 실무적 함의

| 용도 | 가능 여부 | 권장 방법 |
|------|----------|----------|
| 기존 책 다음 주 예측 | **✓** | LightGBM + y_lag1 |
| 급등/급락 예측 | **△** | 1-2주 전 바이럴 지수 모니터링 |
| 카테고리별 트렌드 모니터링 | **✓** | Prophet |
| 신규 책 판매량 예측 | **✗** | lag 피처 없어 불가 |
| 마케팅 타이밍 결정 | **△** | 바이럴 효과 1-2주 시차 고려 |

### 권장 모델 설정

```
모델: LightGBM
피처: y_lag1 (전주 판매점수) 단독 또는 + 기존 피처
스케일러: RobustScaler
평가: Time-based Split
성능: R² ≈ 0.89, F1 ≈ 0.97
```

---

## 한계점 및 향후 연구

### 1. Lag 피처의 구조적 한계
- **신규 도서 Cold Start**: 과거 데이터 없는 책은 예측 불가
- **순환 예측 오차 누적**: 2주 이상 예측 시 예측값을 lag로 사용 → 오차 누적

### 2. 데이터 한계
- 실제 판매량 대신 순위 기반 점수 사용
- 베스트셀러 TOP 20만 분석 (21위 이하 데이터 없음)

### 3. 누락 변수
- 저자 인지도, 출판사 마케팅, SNS 버즈, 리뷰 수
- 이러한 변수들이 판매에 더 큰 영향을 미칠 가능성

### 4. 향후 연구 방향
- 신규 도서 전용 모델 개발 (유사 도서 기반)
- SNS/검색량 등 추가 외부 신호 탐색
- 실시간 예측 시스템 구축

---

## 파일 구조

```
analysis/prophet/
├── ANALYSIS_CONCLUSION_v2.md                 # 이 파일 (전체 결론)
├── FEATURE_DESCRIPTION.md                    # 피처 설명서
│
├── [메인 분석]
├── prophet_walkforward_decay.ipynb           # Prophet 메인 분석
├── ml_lag_feature_test_robust.ipynb          # ML 메인 분석 (SHAP, Time-split)
├── ml_lag_feature_test_robust_executed.ipynb # ML 분석 실행 결과 포함
├── rank_surge_analysis.ipynb                 # 급등/급락 분석
│
├── [데이터]
├── books_ml_dataset_v3.csv                   # 최신 ML 데이터셋
│
├── [시각화]
├── ml_image/                                 # ML 분석 시각화 (10개)
│   ├── shap_feature_importance_bar.png
│   ├── shap_summary_beeswarm.png
│   ├── shap_dependence_y_lag1.png
│   ├── random_vs_timesplit_comparison.png
│   ├── three_methods_comparison.png
│   ├── lightgbm_feature_importance.png
│   ├── prediction_vs_actual.png
│   ├── roc_confusion_matrix.png
│   ├── lag_correlation_heatmap.png
│   └── model_performance_heatmap.png
│
├── [결과 요약]
├── rank_surge_analysis_results.md            # 급등/급락 분석 결과
├── diagnostic_results.md                     # 진단 분석 결과
└── naive_baseline_comparison.md              # Naive 베이스라인 비교
```

---

## 발표 자료 구성 권장

1. **상관분석**: 바이럴 지수 ↔ 판매점수 (동시점 약함)
2. **급등/급락 분석**: Lag 효과 발견 (1-2주 시차)
3. **Prophet 분석**: 카테고리별 판매 예측 (방향성 50%)
4. **ML 분석**: 개별 책 예측 (y_lag1이 핵심)
5. **결론**: 과거 성과가 미래를 결정, 바이럴은 보조적
