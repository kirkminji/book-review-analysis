# 뉴스 트렌드 기반 도서 카테고리 수요 예측 시스템

## 프로젝트 개요

```python
project_definition = {
    "프로젝트명": "뉴스 트렌드 기반 경제/경영 도서 카테고리 수요 예측 시스템",

    "비즈니스_목표": "뉴스 바이럴 지수를 활용해 특정 카테고리 도서의 베스트셀러 순위 변화 예측",

    "ML_문제_유형": "회귀 (Regression)",
}
```

---

## 데이터 정의

### 수집 데이터
| 항목 | 현재 | 목표 (확장) |
|-----|------|-----------|
| 순위 범위 | Top 20 | Top 50 |
| 시간 단위 | 주간 | 주간 |
| 기간 | 2025년 | 2025년 52주 |
| 예상 샘플 수 | ~220건 | ~572건 |

### X 변수 (독립변수)

| 변수명 | 설명 | 타입 |
|-------|------|------|
| `category` | 도서/뉴스 카테고리 | Categorical (One-Hot) |
| `viral_lag1` | 1주 전 바이럴 지수 | Numeric |
| `viral_lag2` | 2주 전 바이럴 지수 | Numeric |
| `viral_lag3` | 3주 전 바이럴 지수 | Numeric |
| `viral_lag4` | 4주 전 바이럴 지수 | Numeric |
| `article_lag1` | 1주 전 기사 수 | Numeric |
| `article_lag2` | 2주 전 기사 수 | Numeric |

### Y 변수 (종속변수)

```python
Y_변수 = {
    "정의": "베스트셀링 점수",
    "계산식": "Σ(21 - rank) for 해당 카테고리 도서들",
    "예시": "재테크 도서가 3위, 15위 → (18) + (6) = 24점",
    "범위": "0 ~ 약 200점 (Top 50 기준)"
}
```

---

## 카테고리 목록 (11개)

1. 거시경제/금융정책
2. 경제이론/학술
3. 금융시스템/위기
4. 기업경영/리더십
5. 부동산/실물자산
6. 재테크/개인금융
7. 주식투자/트레이딩
8. 지정학/국제정세
9. 테크/스타트업
10. 투자철학/대가
11. 미분류

---

## 모델 설계

### 모델 구조
- **통합 모델**: 카테고리를 피처로 포함하여 하나의 모델로 모든 카테고리 예측
- **장점**: 데이터 풀링으로 샘플 수 확보, 카테고리 간 패턴 학습 가능

### 모델 후보
| 모델 | 특징 |
|-----|------|
| Ridge Regression | 선형, 정규화, 해석 용이 |
| Lasso Regression | 선형, 피처 선택 효과 |
| Random Forest | 앙상블, 비선형, 과적합 방지 |
| XGBoost | Gradient Boosting, 고성능 |
| LightGBM | 빠른 학습, 대용량 데이터 적합 |

### 해석 방법
- Feature Importance (트리 기반 모델)
- SHAP Values (피처별 기여도 분해)
- 카테고리별 계수 비교

---

## 실험 설계

### 실험 1: 베이스라인 (현재)
- 전체 11개 카테고리 포함
- 뉴스 바이럴 지수 + 카테고리 피처

### 실험 2: 피처 선택
- Feature Importance 상위 카테고리만 사용
- 상관분석 유의 카테고리만 사용 (거시경제, 재테크)

### 실험 3: 피처 추가 (향후)
- 리뷰 맥락 분석 결과 추가 (실용성, 감성 강도 등)
- 모델 A (뉴스만) vs 모델 B (뉴스+리뷰) 비교

---

## 평가 지표

| 지표 | 설명 | 목표 |
|-----|------|------|
| **R² Score** | 설명력 (높을수록 좋음) | ≥ 0.40 |
| **RMSE** | 평균 제곱근 오차 (낮을수록 좋음) | - |
| **MAE** | 평균 절대 오차 | - |
| **CV Score** | 교차검증 안정성 | 낮은 분산 |

---

## 기존 분석과의 연결

```
[1단계] 상관분석 (탐색적)
        - Top 20 월간 데이터
        - "관계가 있는가?" 확인
        - 결과: r=0.58, p<0.05 (유의미)
              ↓
[2단계] 데이터 확장
        - Top 20 → Top 50 (예정)
        - 월간 → 주간
        - 범위/해상도 개선
              ↓
[3단계] 예측 모델 (현재)
        - 확인된 관계를 실제 예측에 활용
        - 여러 ML 모델 비교
              ↓
[4단계] 해석 및 검증
        - Feature Importance
        - SHAP 분석
        - 비즈니스 인사이트 도출
```

---

## 분석의 한계

### 데이터 한계
1. **Top 20 제약**: 21위 이하 변화 미반영
2. **판매량 부재**: 순위만 사용 (1위와 20위 판매량 차이 미반영)
3. **기간 제한**: 약 1년치 데이터

### 모델 한계
1. **인과관계 불확실**: 상관관계 ≠ 인과관계
2. **외부 요인 미반영**: 마케팅, 저자 인지도, 미디어 노출 등
3. **카테고리 분류 의존**: 분류 정확도에 따라 성능 변동

### 가정
- 순위가 수요를 대리(proxy)한다고 가정
- 뉴스 카테고리와 도서 카테고리가 일치한다고 가정

---

## 비즈니스 활용

### 출판사
- 뉴스 트렌드 모니터링 → 마케팅 타이밍 최적화
- 1~2주 전 뉴스 급등 시 해당 카테고리 프로모션 준비
- 신간 출간 시점을 뉴스 트렌드와 연계

### 서점/이커머스
- 카테고리별 진열/재고 전략 수립
- 뉴스 트렌드 기반 추천 시스템 개선
- 홈페이지 배너/기획전 타이밍 최적화

### 활용 시나리오
```
입력: "이번 주 '재테크' 뉴스 바이럴 지수 급등 (+15)"
      ↓
모델 예측: "2주 후 재테크 카테고리 순위점수 +12점 예상"
      ↓
액션: "재테크 도서 프로모션 준비 권장"
```

---

## 파일 구조

```
analysis/prediction/
├── PROJECT_GUIDE.md                    # 프로젝트 가이드라인 (현재 파일)
├── ml_category_demand_prediction.ipynb # ML 모델링 노트북
├── best_model.pkl                      # 학습된 모델 (실행 후 생성)
└── ml_model_comparison.csv             # 모델 성능 비교 결과 (실행 후 생성)
```

---

## 향후 계획

### Phase 1: 데이터 확장
- [ ] Top 50 베스트셀러 수집
- [ ] 더 긴 기간 데이터 축적

### Phase 2: 피처 추가
- [ ] 리뷰 맥락 분석 결과 통합 (RoBERTa)
- [ ] 모델 A (뉴스만) vs 모델 B (뉴스+리뷰) 비교
- [ ] 계절성 변수 추가

### Phase 3: 모델 고도화
- [ ] 하이퍼파라미터 튜닝
- [ ] 시계열 특화 모델 (LSTM) 검토
- [ ] 앙상블 모델 구성

### Phase 4: 실용화
- [ ] 실시간 예측 파이프라인
- [ ] 대시보드 개발

---

## 참고: 데이터 소스

| 데이터 | 소스 | 경로/테이블 |
|-------|------|------------|
| 뉴스 바이럴 지수 | CSV | `analysis/weekly_news_viral_index.csv` |
| 주간 베스트셀러 | Supabase | `weekly_bestsellers` 테이블 |
| 도서 정보 | Supabase | `books` 테이블 |
| 리뷰 데이터 | CSV | `kyobo_reviews_all_*.csv` |

---

## 문의

프로젝트 관련 문의사항은 이슈로 등록해주세요.
